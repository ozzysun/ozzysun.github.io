(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{b75d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-btn",{attrs:{round:"",color:t.theme,icon:"shopping_cart"},on:{click:function(e){return t.showModal("cartModal")}}}),s("cart-modal",{attrs:{id:"cartModal",title:"購物車"}})],1)},i=[],n=s("ded3"),o=s.n(n),l=(s("e6cf"),s("efea")),c=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:"","full-width":t.fullscreen},model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[s("q-card",{staticClass:"q-ma-xs",staticStyle:{"max-width":"80vw",width:"1000px"}},[s("q-card-section",[s("q-toolbar",{class:["bg-"+t.theme+"-4","text-"+t.theme+"-invert"]},[s("q-toolbar-title",[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(t.title))])]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),s("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"60vh"}},[s("q-list",{staticClass:"q-gutter-sm",staticStyle:{width:"100%"},attrs:{bordered:"",separator:""}},t._l(t.orderItems,(function(e){return s("q-item",{key:"m_p_"+e.id},[s("q-item-section",{staticClass:"q-ml-none",attrs:{top:"",thumbnail:""}},[s("img",{attrs:{src:e.img}})]),s("q-item-section",[s("q-item-label",[t._v(t._s(e.name))]),s("q-item-label",{attrs:{caption:""}},[t._v("$"+t._s(e.price))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-btn",{attrs:{round:"",color:"deep-orange",icon:"delete_forever"},on:{click:function(s){return t.removeItem(e)}}})],1)],1)})),1)],1),s("q-card-section",[s("div",[t._v("品項："+t._s(t.countInfo.count)+"個 金額："+t._s(t.countInfo.total))])]),s("q-separator"),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{size:"sm"},on:{click:t.close}},[t._v("取消")]),s("q-btn",{attrs:{color:t.theme,size:"sm"},on:{click:t.save}},[t._v("送出")])],1)],1)],1)},d=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:"","full-width":t.fullscreen},model:{value:t.isVisible,callback:function(e){t.isVisible=e},expression:"isVisible"}},[s("q-card",{staticClass:"q-ma-xs",staticStyle:{"max-width":"80vw",width:"1000px",height:"800px","mex-height":"80vh"}},[s("q-card-section",[s("q-toolbar",{class:["bg-"+t.theme+"-4","text-"+t.theme+"-invert"]},[s("q-toolbar-title",[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(t.title))])]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),s("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"60vh"}})],1)],1)},u=[],m={name:"VModal",extends:l["a"],props:{title:{type:String,default:"title"},isAppend:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1}},data(){return{modalData:{},isVisible:!1,openerId:null}},watch:{isVisible(t){if(t){const t=this.haveModalData()?this.getModalData():{};this.$set(this,"modalData",t),this.dataReady(),setTimeout((()=>{}),100)}}},created(){},mounted(){this.addInsideModalHandler()},methods:{addInsideModalHandler(){this.on("Modal.CMD.Show",((t,e,s=null,a=!1)=>{t===this.id&&(null!==s&&(this.openerId=s),this.isVisible=e)}))},addEventHandler(){},dataReady(){},dispatchData(t=null,e=!0){null===t&&(t=this.modalData),this.emit("Modal.DispatchData",this.id,t,this.openerId),e&&this.close()},close(){this.isVisible=!1},modalBgClicked(){const t=document.querySelector(".v-modal");null!==t&&t.addEventListener("click",(t=>{this.close()}))}}},p=m,b=s("2877"),f=s("24e8"),v=s("f09f"),g=s("a370"),q=s("65c6"),I=s("6ac5"),w=s("9c40"),x=s("7f67"),_=s("eebe"),y=s.n(_),C=Object(b["a"])(p,h,u,!1,null,"d7dab130",null),S=C.exports;y()(C,"components",{QDialog:f["a"],QCard:v["a"],QCardSection:g["a"],QToolbar:q["a"],QToolbarTitle:I["a"],QBtn:w["a"]}),y()(C,"directives",{ClosePopup:x["a"]});var $={name:"CartModal",extends:S,data(){return{columns:[]}},computed:o()(o()({},Object(c["b"])(["shop","branch","theme","orderItems"])),{},{countInfo(){let t=0;return this.orderItems.forEach((e=>{t+=e.price})),{total:t,count:this.orderItems.length}}}),watch:{},created(){this.columns=[{}]},mounted(){},methods:{removeItem(t){this.dispatch("RemoveOrderItem",t)},save(){this.alert(`訂單已送出 總金額${this.countInfo.total}`),this.afterSave()},afterSave(){console.log("do after send.."),this.dispatch("ResetOrder"),this.close()}}},Q=$,O=s("1c1c"),k=s("66e5"),D=s("4074"),M=s("0170"),j=s("eb85"),P=s("4b7e"),E=Object(b["a"])(Q,r,d,!1,null,"612f9c13",null),T=E.exports;y()(E,"components",{QDialog:f["a"],QCard:v["a"],QCardSection:g["a"],QToolbar:q["a"],QToolbarTitle:I["a"],QBtn:w["a"],QList:O["a"],QItem:k["a"],QItemSection:D["a"],QItemLabel:M["a"],QSeparator:j["a"],QCardActions:P["a"]}),y()(E,"directives",{ClosePopup:x["a"]});var V={name:"CartBtn",extends:l["a"],components:{cartModal:T},data(){return{items:[],selected:[],model:3}},computed:o()({},Object(c["b"])(["shop","branch","theme"])),async created(){},methods:{}},B=V,H=Object(b["a"])(B,a,i,!1,null,null,null);e["a"]=H.exports;y()(H,"components",{QBtn:w["a"]})},bff2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-toolbar",{staticClass:"text-center"},[s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_left"},on:{click:t.prevPage}}),s("q-toolbar-title",[s("span",{staticClass:"text-weight-bold"},[t._v(t._s(t.catTitle))])]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_right"},on:{click:t.nextPage}})],1),s("q-carousel",{attrs:{"transition-prev":"slide-right","transition-next":"slide-left",animated:"",swipeable:"",padding:"",infinite:"","control-color":"primary"},model:{value:t.cid,callback:function(e){t.cid=e},expression:"cid"}},t._l(t.catIds,(function(t){return s("q-carousel-slide",{key:"cat_"+t,attrs:{name:t}},[s("product-list",{attrs:{"category-id":t}})],1)})),1),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,10]}},[s("cart-btn")],1)],1)},i=[],n=s("ded3"),o=s.n(n),l=(s("e6cf"),s("efea")),c=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.mouse.left.right",value:t.useSwipe?t.handleSwipe:"",expression:"useSwipe? handleSwipe : ''",modifiers:{mouse:!0,left:!0,right:!0}}]},[s("q-list",{staticClass:"q-gutter-sm",staticStyle:{width:"100%"},attrs:{bordered:"",separator:""}},[t._l(t.items,(function(e){return s("q-expansion-item",{key:"p_"+e.id,scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{staticClass:"q-ml-none",attrs:{top:"",thumbnail:""}},[s("img",{attrs:{src:e.img}})]),s("q-item-section",[s("q-item-label",[t._v(t._s(e.name))]),s("q-item-label",{attrs:{caption:""}},[t._v("$"+t._s(e.price))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[s("q-checkbox",{attrs:{val:e.id,color:t.theme},on:{input:function(s,a){return t.inputHandler(s,a,e)}},model:{value:t.selectedId,callback:function(e){t.selectedId=e},expression:"selectedId"}})],1)],1)]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("q-list",[s("q-item",{attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[t._v("\n                數量\n              ")]),s("q-item-section",[s("q-input",{staticStyle:{"max-width":"100px"},attrs:{type:"number",filled:"",dense:""},model:{value:t.model,callback:function(e){t.model=t._n(e)},expression:"model"}})],1)],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[t._v("\n                加料\n              ")]),s("q-item-section")],1)],1)],1)],1)],1)})),s("q-item",[s("q-space"),s("q-space")],1)],2)],1)},d=[],h=s("4082"),u=s.n(h),m={name:"PageIndex",extends:l["a"],props:{categoryId:{type:String,default:null}},data(){return{items:[],selectedId:[],model:1}},computed:o()(o()({},Object(c["b"])(["shop","branch","orderItems","theme","storeCats"])),{},{catIds(){const t=[];return this.storeCats.forEach((e=>{t.push(e.id)})),t},catTitle(){let t="";return this.storeCats.forEach((e=>{e.id===this.cid&&(t=e.name)})),t},cid(){return null!==this.categoryId?this.categoryId:this.params.cid},useSwipe(){return null===this.categoryId}}),async created(){this.selectedId=[],await this.loadData()},watch:{orderItems(){this.selectedId=[],this.items.forEach((t=>{this.isSelected(t.id)&&this.selectedId.push(t.id)}))},async $route(t,e){await this.loadData()}},methods:{async loadData(){const t=await this.fetch("productList",this.shop,this.branch,this.cid);this.items=t.data,this.items.forEach((t=>{this.isSelected(t.id)&&this.selectedId.push(t.id)}))},inputHandler(t,e,s){-1===t.indexOf(s.id)?this.dispatch("RemoveOrderItem",s):this.dispatch("AddOrderItem",s)},isSelected(t){let e=!1;return this.orderItems.forEach((s=>{s.id===t&&(e=!0)})),e},handleSwipe(t){let{evt:e}=t,s=u()(t,["evt"]);console.log("info=="),console.log(s);const a=s.direction;"left"===a?this.nextPage(!0):"right"===a&&this.prevPage(!0)},nextPage(t=!1){const e=this.catIds.indexOf(this.cid);let s=e+1;s>=this.catIds.length&&(s=t?0:this.catIds.length-1);const a=`/${this.shop}/${this.branch}/${this.catIds[s]}/list`;this.to(a)},prevPage(t=!1){const e=this.catIds.indexOf(this.cid);let s=e-1;s<0&&(s=t?this.catIds.length-1:0);const a=`/${this.shop}/${this.branch}/${this.catIds[s]}/list`;this.to(a)}}},p=m,b=s("2877"),f=s("9989"),v=s("1c1c"),g=s("3b73"),q=s("4074"),I=s("0170"),w=s("8f8e"),x=s("f09f"),_=s("a370"),y=s("66e5"),C=s("27f9"),S=s("2c91"),$=s("12c5"),Q=s("eebe"),O=s.n(Q),k=Object(b["a"])(p,r,d,!1,null,null,null),D=k.exports;O()(k,"components",{QPage:f["a"],QList:v["a"],QExpansionItem:g["a"],QItemSection:q["a"],QItemLabel:I["a"],QCheckbox:w["a"],QCard:x["a"],QCardSection:_["a"],QItem:y["a"],QInput:C["a"],QSpace:S["a"]}),O()(k,"directives",{TouchSwipe:$["a"]});var M=s("b75d"),j={name:"SwipeCategoryPage",extends:l["a"],components:{productList:D,cartBtn:M["a"]},data(){return{items:[],cid:"hot"}},computed:o()(o()({},Object(c["b"])(["shop","branch","storeCats"])),{},{catIds(){const t=[];return this.storeCats.forEach((e=>{t.push(e.id)})),t},catTitle(){let t="";return this.storeCats.forEach((e=>{e.id===this.cid&&(t=e.name)})),t}}),async created(){this.cid=this.params.cid,this.items=await this.dispatch("GetStoreCats",{shop:this.shop,branch:this.branch})},watch:{cid(t){const e=`/${this.shop}/${this.branch}/${t}/list`;this.$route.path!==e&&this.to(e)}},mounted(){},methods:{nextPage(t=!1){const e=this.catIds.indexOf(this.cid);let s=e+1;s>=this.catIds.length&&(s=t?0:this.catIds.length-1),this.cid=this.catIds[s]},prevPage(t=!1){const e=this.catIds.indexOf(this.cid);let s=e-1;s<0&&(s=t?this.catIds.length-1:0),this.cid=this.catIds[s]}}},P=j,E=s("65c6"),T=s("9c40"),V=s("6ac5"),B=s("880c"),H=s("62cd"),L=s("de5e"),R=Object(b["a"])(P,a,i,!1,null,null,null);e["default"]=R.exports;O()(R,"components",{QToolbar:E["a"],QBtn:T["a"],QToolbarTitle:V["a"],QCarousel:B["a"],QCarouselSlide:H["a"],QPageSticky:L["a"]})},efea:function(t,e,s){"use strict";s("ddb0"),s("e6cf");var a=s("2b0e");let i=null;null===i&&(i=new a["a"]({data(){return{classNames:[]}},methods:{on(t,e,s){if(Object.defineProperty(s,"fnName",{value:e}),void 0===this._events[t])this.$on(t,s);else{let a=!1;for(let i=0;i<this._events[t].length;i++)if(this._events[t][i].fnName===e){a=!0,this._events[t][i]=s;break}a||this.$on(t,s)}},emit(t,...e){this.$emit(t,...e)},off(t,e){this.$off(t)}}}));var n,o,l=i,c=s("71f5"),r=s("7b12"),d=s("2ef0"),h=s.n(d),u={name:"VComponent",data(){return{}},computed:{params(){return this.$route.params},uid(){return`uid_${this._uid}`},id(){let t=void 0===this.$el||void 0===this.$el.getAttribute?null:this.$el.getAttribute("id");return void 0!==this.$attrs&&this.$attrs.id&&(t=this.$attrs.id),t},query(){return this.$route.query}},methods:{addModalHandler(t=null){this.on("Modal.DispatchData",((e,s,a=null)=>{null!==a&&a!==this.id||(null===t?this.modalHandler(e,s):t(e,s))}))},modalHandler(t,e,s=null){},showModal(t,e=null,s=null,a=!1){null!==e&&this.setModalData(e),this.emit("Modal.CMD.Show",t,!0,s,a)},setModalData(t){Object(c["d"])("modalData",t,"tmp")},haveModalData(){return null!==Object(c["b"])("modalData","tmp")},getModalData(){const t=h.a.cloneDeep(Object(c["b"])("modalData","tmp"));return Object(c["c"])("modalData","tmp"),t},hideModal(t){this.emit("Modal.CMD.Show",t,!1)},on(t,...e){let s,a;const i=t.split(",");1===e.length?(s=e[0],a=this.id):2===e.length&&(a=e[0],s=e[1]);for(let n=0;n<i.length;n++)l.on(i[n],a,s)},emit(t,...e){l.emit(t,...e)},off(t,e){l.off(t,e)},async fetch(t,...e){const s=Object(r["b"])();return new Promise(((a,i)=>{s[t](...e).then((t=>{a(t)})).catch((t=>{i(t)}))}))},fetchSync(t,...e){const s=Object(r["b"])(),a=e.pop();s[t](...e).then((t=>{a(null,t)})).catch((t=>{a(t,t)}))},async fetchURL(t,e="GET",s=null){return new Promise(((a,i)=>{Object(r["a"])(t,e,s).then((t=>{a(t)})).catch((t=>{i(t)}))}))},async dispatch(t,...e){return new Promise(((s,a)=>{const i=1===e.length?e[0]:e;this.$store.dispatch(t,i).then((t=>{s(t)})).catch((t=>{a(t)}))}))},to(t){this.$router.push(t)},setReactive(t,e){this[t]=Object.assign({},e,e)},trace(t){console.log(t)},alert(t,e="",s=null){this.$q.dialog({title:e,message:t}).onOk((()=>{null!==s&&s()})).onCancel((()=>{})).onDismiss((()=>{}))},confirm(t,e="",s=null){this.$q.dialog({title:e,message:t,cancel:!0,persistent:!0}).onOk((()=>{null!==s&&s()})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},m=u,p=s("2877"),b=Object(p["a"])(m,n,o,!1,null,null,null);e["a"]=b.exports}}]);